// swift-tools-version: 6.0

import PackageDescription

let package = Package(
  name: "SPMGraphConfig",
  platforms: [
    .macOS(.v13)
  ],
  products: [
    .library(
      name: "SPMGraphDescription",
      type: .dynamic,
      targets: [
        "SPMGraphConfig"
      ]
    ),
  ],
  dependencies: [
    // Pinned to the latest commit of the release, otherwise it fails because it depends
    // on the `swift-package-manager` that isn't a stable release.
    //
    // - Note: When developing it should be updated to the working branch
    .package(
      url: "https://github.com/getyourguide/spmgraph.git",
      revision: "17256eaab5d1233bc21e174393bf0ee518287fa9"
    ),
    // - Pinned to the the Swift 6.2 development / Xcode 16.3
    // It auto exports SwiftToolsSupport, so no need to directly depend it üôè
    .package(
      url: "https://github.com/apple/swift-package-manager",
      revision: "swift-6.2-RELEASE"
    ),
  ],
  targets: [
    .target(
      name: "SPMGraphConfig",
      dependencies: [
        .product(
          name: "SPMGraphDescriptionInterface",
          package: "spmgraph"
        ),
        .product(
          name: "SwiftPMDataModel",
          package: "swift-package-manager"
        )
      ]
    ),
  ]
)
